#!/bin/bash

L3_lst=(
1730290730453-1
1730290734985-9
1730290735519-10
1730290739893-16
1730290744525-23
1730290745331-24
1730290747673-28
1730290748853-30
1730290749927-32
1730290756371-42
1730290757310-44
1730290758269-45
1730290764540-54
1730290767017-57
1730290774948-69
1730290776861-72
1730290780551-77
1730290793026-98
1730290810193-123
1730290897721-240
1730290938005-296
1730290940626-300
1730290944709-306
1730290991452-368
1730291323238-808
1730291489182-979
1730291621099-1117
1730291657267-1152
1730293076709-2593
1730293638863-3158
1730296298703-5847
1730297212467-6777
1730297925439-7500
1730298307941-7886
1730299195382-8772
1730300922442-10503
1730301734327-11324
1730302559708-12142
1730303111929-12708
1730304868004-14453
1730309573661-19113
1730309578966-19118
1730310462584-19991
1730310923204-20453
1730312916585-22427
1730325667943-35136
1730328650487-38119
1730328908015-38380
1730336703990-46385
1730368380202-74017
1730376061106-82744
1730378509302-85108
1730379750048-88030
1730381498855-93850
1730383173533-99506
1730383212046-99637
)

for i in $(seq 1 10); do
    for l in "${L3_lst[@]}"; do
        echo "iteration_${i}/r${l}"
        mkdir -p "iteration_${i}/r${l}"
        cp Dockerfile_template "iteration_${i}/r${l}/Dockerfile"
        sed -i "s|ENTRYPOINT.*|ENTRYPOINT [\"./run_req_iteration.sh\", \"conf/req_L3_1\", \"50\", \"${i}\", \"5000000\", \"500000\"]|" "iteration_${i}/r${l}/Dockerfile"
    done
done
